{% load static %} {% load i18n %}
<!DOCTYPE html>
<html lang="en" class="">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Frame-Options" content="DENY" />

    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'icons/favicon-32x32.png' %}">

    <link rel="manifest" href="{% static 'icons/site.webmanifest' %}">

    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'icons/apple-touch-icon.png' %}">
    
    <link rel="stylesheet" href="{% static 'css/toast.css' %}" />
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />

    <link rel="canonical" href="{{ request.build_absolute_uri|cut:'?'|cut:'#' }}" />

    <title>Saidbek | {% block title %}Full-Stack Web Developer (MERN &amp; Django){% endblock title %}</title>

    {% block meta %}
    <!-- Primary Meta Tags -->
    <meta
      name="description"
      content="I'm Saidbek Khudayberdiev, a full-stack web developer crafting modern, secure, and high-performance web apps using React, Node.js, and Django. Explore my portfolio, projects, and contact me for collaboration."
    />

    <!-- Open Graph (Social Preview) -->
    <meta property="og:title" content="Saidbek Khudayberdiev — Full-Stack Web Developer (MERN &amp; Django)" />
    <meta
      property="og:description"
      content="Building fast, elegant, and scalable web apps using React, Node.js, and Django. Check out my portfolio projects and see how I turn ideas into impactful digital experiences."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{request.build_absolute_uri}}" />
    <!--Image size 1200×630 px-->
    <meta
      property="og:image"
      content="{{ request.scheme }}://{{ request.get_host }}{% static 'images/default-thumbnail.webp' %}"
    />
    <meta property="og:site_name" content="Saidbek Khudayberdiev Portfolio" />

    <!-- Optional: Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Saidbek Khudayberdiev — Full-Stack Web Developer" />
    <meta
      name="twitter:description"
      content="Modern web development with React, Node.js, and Django. Explore my best projects and collaborations."
    />
    <meta
      name="twitter:image"
      content="{{ request.scheme }}://{{ request.get_host }}{% static 'images/default-thumbnail.webp' %}"
    />

    <!-- Robots (index,follow is default; change if needed) -->
    <meta name="robots" content="index, follow" />

    <!-- Structured data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Saidbek Khudayberdiev",
        "url": "{{ request.build_absolute_uri }}",
        "jobTitle": "Full-Stack Web Developer",
        "sameAs": [
          "https://github.com/yourusername",
          "https://linkedin.com/in/yourusername"
        ],
        "image": "{{ request.scheme }}://{{ request.get_host }}{% static 'images/default-thumbnail.webp' %}",
        "description": "Full-stack developer building scalable web apps using React, Node.js, and Django."
      }
    </script>
    {% comment %}
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "How to Build Strong SEO in HTML — Practical Guide",
        "description": "Step-by-step HTML checklist to build SEO-friendly pages.",
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://example.com/seo-html-guide"
        },
        "author": {
          "@type": "Person",
          "name": "Your Name"
        },
        "datePublished": "2025-10-30",
        "image": "https://example.com/images/og-seo-guide.webp"
      }
    </script>
    {% endcomment %} {% endblock meta %}
  </head>
  <body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 scroll-smooth min-h-screen flex flex-col">
    <!-- Navbar -->
    {% include "_navbar.html" %}

    <!-- Body -->
    <div class="w-full h-full flex-1">{% block content %} {% endblock content %}</div>
    <!-- Footer -->
    {% include "_footer.html" %}

    <!-- To prevent theme flicker before css loading -->
    {% comment %}
    <script>
      if (
        localStorage.getItem("theme") === "dark" ||
        (!localStorage.getItem("theme") &&
          window.matchMedia("(prefers-color-scheme: dark)").matches)
      ) {
        document.documentElement.classList.add("dark");
      } else {
        document.documentElement.classList.remove("dark");
      }
    </script>
    {% endcomment %}

    <script defer src="{% static 'js/toast.js' %}"></script>
    <script defer src="{% static 'js/scripts.js' %}"></script>

    {% if messages %} 
      {% for message in messages %} {# Only show messages that are NOT tagged 'form-error' #}
        {% if 'form-error' not in message.tags %}
        <script>
          window.onload = function() {
            window.toast.open({
              message: "{{ message|escapejs }}",
              type: "{{ message.tags |escapejs }}",
              duration: 3000,
            });
          }
        </script>
        {% endif %} 
      {% endfor %} 
    {% endif %} 
    {% block script %}{% endblock script %}
  </body>
</html>
