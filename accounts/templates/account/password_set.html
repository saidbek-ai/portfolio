{% extends "layout.html" %} {# home layout  #}
{% load i18n %}
{% load allauth socialaccount %}

{% block title %}{% trans "Set Password" %}{% endblock %}

{% block content %}
<div class="bg-gray-100 dark:bg-gray-900 flex items-center justify-center py-8 px-4 sm:px-6 lg:px-8 transition-colors duration-500">
    <div class="w-full max-w-md md:max-w-4xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-6 transition-colors duration-500">
        <div class="text-center">
            <h1 class="text-3xl font-extrabold text-gray-900 dark:text-gray-100">
                {% trans "Set Password" %}
            </h1>
            <p class="mt-2 text-sm text-gray-600 dark:text-gray-300">
                {% trans "You do not have a password set for your account. Please set one to enable traditional login." %}
            </p>
        </div>

        <div class="w-full h-full grid grid-cols-1 md:grid-cols-2 py-6 md:gap-6 mt-6">
            <!--Error ow warnings-->
        <div class="h-full w-full flex justify-center items-center">
        {% if form.non_field_errors %}
          <div class="w-full bg-red-100 dark:bg-red-900 border border-red-400 text-red-700 dark:text-red-200 text-sm px-4 py-3 rounded-lg relative" role="alert">
            <strong class="font-bold">{% trans "Password setting failed!" %}</strong>
            {% for error in form.non_field_errors %}
            <span class="block mt-1 sm:inline">{{ error }}</span>
            {% endfor %}
          </div>
        {% elif form.password1.help_text %}
          <div class="w-full bg-yellow-100 dark:bg-yellow-900 border border-yellow-400 text-yellow-700 dark:text-yellow-200 text-sm px-4 py-3 rounded-lg relative" role="alert">
            <strong class="font-bold">{% trans "Note" %}</strong>
            <span class="block mt-1 sm:inline">{{ form.password1.help_text }}</span>
          </div>
          {% endif %}
        </div>
        <!--Form -->
          <form method="post" action="{% url 'account_set_password' %}" class="space-y-6 flex flex-col w-full">
              {% csrf_token %}
              <div class="rounded-md shadow-sm space-y-4">
 
                  {% comment %} {{form}} {% endcomment %}
                  
                  {% for field in form %}
                    {% include "components/password_input.html" with input_data=field label=field.label %}
                  {% endfor %}
              </div>
  
              <div>
                  <button type="submit"
                      name="action"
                      value="change"
                      class="group relative w-full flex justify-center py-2 sm:py-3 px-4 border border-transparent text-base sm:text-lg font-medium rounded-lg text-white
                             bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700
                             focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-500
                             transition duration-150 ease-in-out">
                      {% trans "Set Password" %}
                  </button>
              </div>
          </form>
          </div>
        </div>
    </div>
</div>
{% endblock %}